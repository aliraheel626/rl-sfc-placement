# SFC Placement RL Environment Configuration

# Substrate Network Configuration
substrate:
  # Fixed size: 25 nodes (smaller network, difficulty preserved via scaled SFC/load)
  num_nodes:
    min: 25
    max: 25
  max_nodes: 25 # Fixed upper bound for obs/action space shapes
  mesh_connectivity: 0.35 # Slightly higher connectivity for small graph (paths exist)

  # Node resource ranges (scaled up for ~70% placement)
  resources:
    ram:
      min: 20
      max: 120
    cpu:
      min: 10
      max: 60
    storage:
      min: 250
      max: 1500
    security_score:
      min: 1
      max: 5

  # Link attribute ranges (sufficient bandwidth)
  links:
    bandwidth:
      min: 100
      max: 500
    latency:
      min: 5
      max: 60

# SFC Request Configuration (scaled for 25-node substrate; difficulty preserved)
sfc:
  # Number of VNFs per chain (smaller chains so multiple fit in 25 nodes)
  vnf_count:
    min: 2
    max: 6

  # VNF resource demands (fits on nodes; similar relative load vs capacity)
  vnf_resources:
    ram:
      min: 2
      max: 12
    cpu:
      min: 1
      max: 6
    storage:
      min: 20
      max: 120

  # SFC-level constraints (achievable but require good placement)
  constraints:
    security_score:
      min: 1
      max: 5
    max_latency:
      min: 35
      max: 120
    min_bandwidth:
      min: 50
      max: 250

  # Time to live (truncated exponential on [min, max] via inverse CDF; optional mean, default = midpoint)
  ttl:
    distribution: exponential
    min: 1
    max: 25

  # Lower isolation probability to reduce pressure
  hard_isolation_probability: 0.1

# Training Configuration (PPO tuning for create_maskable_ppo)
training:
  total_timesteps: 1000000
  # Learning rate: constant 1e-4, or linear decay from 3e-4 (set use_linear_lr_schedule: true)
  learning_rate: 0.0001   # 1e-4 (final value when using schedule)
  use_linear_lr_schedule: false
  lr_initial: 0.0003      # 3e-4 (start value when use_linear_lr_schedule is true)
  n_steps: 4096
  batch_size: 512
  n_epochs: 10
  gamma: 0.99
  ent_coef: 0.01          # entropy coefficient (decay later if desired)
  gae_lambda: 0.97
  clip_range: 0.2
  max_requests_per_episode: 3000 
  randomize_topology: true

# Reward Configuration
rewards:
  acceptance: 1
  rejection: -1

# Evaluation Configuration
evaluation:
  num_requests: 1000
